<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الوحدة 2: مساحة النواة ومساحة المستخدم | مسار الأمن السيبراني</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #2c3e50; /* Dark Blue/Grey */
            --secondary-color: #3498db; /* Bright Blue */
            --accent-color: #e74c3c; /* Red */
            --light-bg: #f8f9fa; /* Light Grey */
            --dark-text: #2c3e50; /* Dark Blue/Grey */
            --light-text: #7f8c8d; /* Medium Grey */
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background-color: var(--light-bg);
            color: var(--dark-text);
            line-height: 1.8;
        }

        .course-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 3rem 0;
            margin-bottom: 2rem;
            border-radius: 0 0 1rem 1rem;
        }
        
        .module-card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin-bottom: 2rem;
            transition: transform 0.3s ease;
            border-right: 4px solid var(--secondary-color);
        }

        .module-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .module-title {
            color: var(--primary-color);
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .list-group-item.active {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
        }

        .summary-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1.5rem;
        }

        .summary-table th, .summary-table td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: right;
        }

        .summary-table th {
            background-color: var(--primary-color);
            color: white;
        }
        
        .summary-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        .note-box {
            background-color: #e8f4ff;
            border-right: 4px solid var(--secondary-color);
            border-radius: 0.5rem;
            padding: 1.25rem;
            margin: 1.5rem 0;
            color: var(--primary-color);
        }
        
        .activity-box {
            background-color: #f0fff4; /* Light green */
            border-right: 4px solid #28a745; /* Green */
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .activity-box h5 {
            color: #28a745;
            margin-bottom: 1rem;
        }

        .code-block {
            background-color: #e9ecef;
            color: #495057;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            white-space: pre-wrap;
            word-break: break-all;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .course-header {
                padding: 2rem 0;
            }
            .module-card {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <header class="course-header text-center">
        <div class="container">
            <h1 class="display-4 fw-bold mb-3">مقرر أمن أنظمة التشغيل</h1>
            <p class="lead">حماية أنظمة التشغيل (Windows, Linux, macOS) من التهديدات الأمنية</p>
        </div>
    </header>

    <div class="container">
        <div class="row">
            <div class="col-lg-3 mb-4">
                <div class="card shadow-sm">
                    <div class="card-header bg-primary text-white">
                        <i class="fas fa-list-ul me-2"></i>وحدات المقرر
                    </div>
                    <div class="list-group list-group-flush">
                        <a href="unit-1.html" class="list-group-item list-group-item-action">
                            <i class="fas fa-shield-alt me-2"></i>الوحدة 1: مقدمة في أمن أنظمة التشغيل
                        </a>
                        <a href="unit-2.html" class="list-group-item list-group-item-action active">
                            <i class="fas fa-layer-group me-2"></i>الوحدة 2: مساحة النواة ومساحة المستخدم
                        </a>
                        <a href="unit-3.html" class="list-group-item list-group-item-action">
                            <i class="fas fa-lock me-2"></i>الوحدة 3: الميزات الأمنية الأساسية
                        </a>
                        <a href="unit-4.html" class="list-group-item list-group-item-action">
                            <i class="fas fa-file-shield me-2"></i>الوحدة 4: أمن الملفات والتحكم في الوصول
                        </a>
                        <a href="unit-5.html" class="list-group-item list-group-item-action">
                            <i class="fas fa-bug me-2"></i>الوحدة 5: التهديدات الأمنية والتدابير المضادة
                        </a>
                        <a href="unit-6.html" class="list-group-item list-group-item-action">
                            <i class="fas fa-user-shield me-2"></i>الوحدة 6: إدارة المستخدمين والتحقق
                        </a>
                        <a href="unit-7.html" class="list-group-item list-group-item-action">
                            <i class="fas fa-random me-2"></i>الوحدة 7: أمن العمليات وIPC
                        </a>
                        <a href="unit-8.html" class="list-group-item list-group-item-action">
                            <i class="fas fa-tools me-2"></i>الوحدة 8: أدوات الأمان العملية
                        </a>
                        <a href="unit-9.html" class="list-group-item list-group-item-action">
                            <i class="fas fa-briefcase me-2"></i>الوحدة 9: دراسات حالة عملية
                        </a>
                        <a href="unit-10.html" class="list-group-item list-group-item-action">
                            <i class="fas fa-book me-2"></i>الوحدة 10: ملخص وموارد إضافية
                        </a>
                    </div>
                    <div class="card-footer text-center">
                        <a href="index.html" class="btn btn-outline-primary btn-sm">
                            <i class="fas fa-arrow-right me-1"></i> العودة إلى المقرر
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-lg-9">
                <div class="module-card p-4 mb-4">
                    <h2 class="module-title"><i class="fas fa-layer-group me-2"></i>الوحدة 2: مساحة النواة ومساحة المستخدم وتأثيرها الأمني</h2>
                    
                    <p class="mb-4">
                        يعتمد أمن نظام التشغيل بدرجة كبيرة على البنية المعمارية التي تفصل بين العمليات ذات الامتيازات المرتفعة (<strong>Kernel Space</strong>) وتلك الخاصة بالمستخدمين العاديين والبرامج (<strong>User Space</strong>). يعتبر هذا الفصل حجر الزاوية في تصميم أنظمة التشغيل الحديثة، حيث يُسهم بشكل مباشر في تقليل سطح الهجوم المتاح أمام البرمجيات الخبيثة، ويمنع التطبيقات من العبث بالموارد الحساسة للنظام.
                    </p>

                    <div class="note-box">
                        <h5 class="mb-2"><i class="fas fa-bullseye me-2"></i>أهداف الوحدة:</h5>
                        <ul class="list-unstyled mb-0">
                            <li>فهم الفروقات المعمارية والوظيفية بين مساحة النواة ومساحة المستخدم.</li>
                            <li>تحليل التحديات الأمنية الناتجة عن آليات التواصل بين المساحتين.</li>
                            <li>استيعاب كيف يمكن للفصل الفعّال أن يمنع تسرب البيانات أو تصعيد الامتيازات.</li>
                            <li>دراسة أمثلة واقعية لثغرات برمجية ناتجة عن فشل في هذا الفصل.</li>
                            <li>تقييم تقنيات الحماية الحديثة مثل KASLR وUAC.</li>
                        </ul>
                    </div>
                    
                    <h4 class="mt-5"><i class="fas fa-question-circle me-2"></i>1. ما هي مساحة النواة ومساحة المستخدم؟</h4>
                    <p>
                        تُقسّم أنظمة التشغيل الحديثة الذاكرة إلى منطقتين رئيسيتين:
                    </p>
                    <ul>
                        <li>
                            <strong>مساحة النواة (Kernel Space):</strong> تمثل الجزء المحمي من الذاكرة حيث يتم تنفيذ العمليات الحيوية لنظام التشغيل مثل إدارة العمليات، وإدارة الذاكرة، والتحكم في العتاد. يُسمح فقط للكود الذي يملك امتيازات عالية (مثل برامج التشغيل والنواة نفسها) بالعمل في هذه المساحة.
                        </li>
                        <li>
                            <strong>مساحة المستخدم (User Space):</strong> هي البيئة التي تُنفذ فيها معظم التطبيقات التي يتفاعل معها المستخدمون، مثل متصفحات الإنترنت وبرامج تحرير النصوص. الكود في هذه المساحة لا يمكنه الوصول مباشرةً إلى مكونات النواة، بل يتطلب ذلك وسائط رسمية مثل <strong>نداءات النظام (System Calls)</strong>.
                        </li>
                    </ul>

                    <div class="note-box">
                        <h5 class="mb-2"><i class="fas fa-info-circle me-2"></i>معلومة تقنية:</h5>
                        <p class="mb-0">في العديد من أنظمة التشغيل، يُستخدم نموذج الحلقات (Ring Model) لتحديد الامتيازات، حيث تعمل النواة في <strong>الحلقة 0 (Ring 0)</strong> بينما تعمل التطبيقات في <strong>الحلقة 3 (Ring 3)</strong>.</p>
                    </div>

                    <h4 class="mt-5"><i class="fas fa-shield-alt me-2"></i>2. لماذا يعتبر هذا الفصل ضروريًا؟</h4>
                    <p>يُعد الفصل بين المساحتين ركيزة أساسية للأمن لعدة أسباب:</p>
                    <ul>
                        <li><strong>تقليل سطح الهجوم:</strong> يمنع التطبيقات الضارة من الوصول المباشر إلى موارد النظام الحساسة.</li>
                        <li><strong>منع الأعطال الكارثية:</strong> عزل التطبيقات يمنعها من التسبب في انهيار كامل للنظام عند حدوث خطأ.</li>
                        <li><strong>تطبيق سياسات أمنية:</strong> يتيح فرض سياسات دقيقة على صلاحيات كل تطبيق، مثل ما تفعله أدوات SELinux و AppArmor.</li>
                        <li><strong>ضبط قنوات الاتصال:</strong> يتم التواصل بين المساحتين عبر قنوات مراقبة، مما يُسهل تسجيل الأنشطة وتحليلها.</li>
                    </ul>

                    <h4 class="mt-5"><i class="fas fa-exchange-alt me-2"></i>3. كيف يتم التواصل بين المساحتين؟</h4>
                    <p>يتم التفاعل بين مساحة المستخدم ومساحة النواة بطرق محكمة:</p>
                    <ul>
                        <li>
                            <strong>نداءات النظام (System Calls):</strong> هي الطريقة الرئيسية لطلب الخدمات من النواة. مثال: طلب قراءة ملف أو إرسال بيانات عبر الشبكة.
                        </li>
                        <li>
                            <strong>واجهات برمجة التطبيقات (APIs):</strong> واجهات تُقدّم وظائف عالية المستوى للمطورين، وتُترجم داخليًا إلى نداءات نظام. مثال: Win32 API في Windows.
                        </li>
                        <li>
                            <strong>برامج التشغيل (Drivers):</strong> برامج تُشغّل داخل النواة لتسهيل التفاعل مع الأجهزة المادية.
                        </li>
                    </ul>
                    <p class="mt-3"><strong>مثال توضيحي:</strong> عندما تطلب من متصفح الويب حفظ ملف، يرسل التطبيق طلبًا عبر API، يُترجم إلى نداء نظام (System Call) يتم التعامل معه من قبل النواة، والتي بدورها تقوم بتشغيل برنامج تشغيل القرص الصلب لتنفيذ عملية الكتابة.</p>

                    <h4 class="mt-5"><i class="fas fa-bomb me-2"></i>4. التهديدات المتعلقة بهذا النموذج</h4>
                    <div class="table-responsive">
                        <table class="table table-bordered table-striped summary-table">
                            <thead>
                                <tr>
                                    <th>التهديد</th>
                                    <th>الوصف</th>
                                    <th>مثال</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Privilege Escalation</strong></td>
                                    <td>تصعيد امتيازات تطبيق من مستوى مستخدم عادي إلى مستوى النواة.</td>
                                    <td>استغلال ثغرة في برنامج تشغيل للحصول على صلاحيات root.</td>
                                </tr>
                                <tr>
                                    <td><strong>Kernel Exploits</strong></td>
                                    <td>استغلال أخطاء برمجية في كود النواة للوصول غير المشروع.</td>
                                    <td>استغلال ثغرة Use-After-Free في النواة لتجاوز صلاحيات الذاكرة.</td>
                                </tr>
                                <tr>
                                    <td><strong>Malicious Drivers</strong></td>
                                    <td>تثبيت برامج تشغيل تحتوي على كود خبيث أو غير موثوق.</td>
                                    <td>برنامج تشغيل غير موقع يُعدّل وظائف النظام الأساسية.</td>
                                </tr>
                                <tr>
                                    <td><strong>Kernel Rootkits</strong></td>
                                    <td>برمجيات خبيثة تُثبت داخل النواة وتتحكم بالنظام وتُخفي وجودها.</td>
                                    <td>Rootkit يقوم بتعديل نداءات النظام لإخفاء العمليات الخبيثة.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h4 class="mt-5"><i class="fas fa-cogs me-2"></i>5. دراسات مقارنة وتقنيات حماية</h4>
                    <p>طور كل نظام تشغيل تقنيات خاصة به لتعزيز الفصل بين المساحتين:</p>
                    <ul>
                        <li>
                            <strong>Windows:</strong> يستخدم **UAC** (User Account Control) للتحكم في صلاحيات المستخدم، و**Kernel Patch Protection** لمنع تعديل النواة، و**ASLR** (Address Space Layout Randomization) لمنع التنبؤ بمواقع الذاكرة.
                        </li>
                        <li>
                            <strong>Linux:</strong> يعتمد على **SELinux** و **AppArmor** لفرض سياسات تحكم في الوصول، و**seccomp** لتقييد نداءات النظام التي يمكن للتطبيقات استخدامها.
                        </li>
                        <li>
                            <strong>macOS:</strong> يطبق **SIP** (System Integrity Protection) لحماية ملفات النظام الأساسية، و**Gatekeeper** لمنع تشغيل التطبيقات غير الموثوقة.
                        </li>
                    </ul>

                    <div class="activity-box">
                        <h5 class="mb-3"><i class="fas fa-flask me-2"></i>نشاط تطبيقي: تحليل نداءات النظام في Linux</h5>
                        <p>استخدام أداة <code>strace</code> لتحليل كيفية تواصل التطبيقات مع النواة يُعد طريقة ممتازة لفهم هذا المفهوم عمليًا.</p>
                        <p><strong>تمرين عملي:</strong></p>
                        <ol>
                            <li>افتح طرفية (Terminal) في نظام Linux.</li>
                            <li>نفّذ الأمر <code>whoami</code> للتأكد من أنك لست مستخدمًا بصلاحيات root.</li>
                            <li>حاول الوصول إلى ملف محمي بصلاحيات الجذر:
                                <div class="code-block mt-2"><code>ls /root/</code></div>
                                <p class="mt-2">ستلاحظ أن النظام يرفض الوصول بسبب عدم وجود صلاحيات كافية.</p>
                            </li>
                            <li>استخدم الأمر <code>strace</code> لتحليل نداءات النظام التي يقوم بها أمر بسيط مثل <code>ls</code>:
                                <div class="code-block mt-2"><code>strace ls</code></div>
                                <p class="mt-2">هذا سيُظهر قائمة طويلة من نداءات النظام التي يستخدمها الأمر <code>ls</code> للتفاعل مع النواة، مثل فتح الملفات وقراءتها.</p>
                            </li>
                            <li>(تمرين متقدم) قم بتتبع تطبيق يعمل في الخلفية مثل Firefox:
                                <div class="code-block mt-2"><code>sudo strace -p $(pidof firefox) -o trace.txt</code></div>
                                <p class="mt-2">هذا الأمر سيُسجل جميع نداءات النظام الخاصة بـ Firefox في ملف <code>trace.txt</code>، مما يسمح لك بتحليلها لاحقًا.</p>
                            </li>
                        </ol>
                        <p class="mt-3">
                            <strong>تحليل:</strong> يوضح هذا التمرين كيف يتم التحكم في الوصول إلى وظائف النواة، ولماذا تُعتبر صلاحيات المستخدم عنصراً حاسماً في أمن النظام.
                        </p>
                    </div>

                    <hr>

                    <h4 class="mt-5"><i class="fas fa-search me-2"></i>أسئلة للمراجعة:</h4>
                    <ul class="list-unstyled">
                        <li><strong>1.</strong> اشرح الفرق بين **مساحة النواة** و**مساحة المستخدم** بكلماتك الخاصة.</li>
                        <li><strong>2.</strong> ما هو دور **نداء النظام (System Call)** في حماية نظام التشغيل؟</li>
                        <li><strong>3.</strong> اذكر ثلاثة أنواع من التهديدات التي تستهدف الفصل بين المساحتين.</li>
                        <li><strong>4.</strong> ما هي وظيفة تقنية **KASLR**؟ ولماذا تعتبر مهمة؟</li>
                    </ul>

                    <h4 class="mt-5"><i class="fas fa-check-circle me-2"></i>مخرجات التعلم المتوقعة:</h4>
                    <p>بنهاية هذه الوحدة، ينبغي أن يكون المتعلم قادرًا على:</p>
                    <ul>
                        <li>التمييز بين مساحة النواة ومساحة المستخدم بدقة.</li>
                        <li>شرح الآليات الأمنية التي تحكم التفاعل بين المساحتين.</li>
                        <li>تحليل تأثير الثغرات البرمجية الناتجة عن فشل العزل بين المساحات.</li>
                        <li>تقديم حلول عملية لتحسين أمن التواصل بين التطبيقات والنواة.</li>
                    </ul>

                </div>

                <div class="d-flex justify-content-between mb-4">
                    <a href="unit-1.html" class="btn btn-outline-secondary">
                        <i class="fas fa-arrow-right me-1"></i> الوحدة السابقة
                    </a>
                    <a href="unit-3.html" class="btn btn-primary">
                        الوحدة التالية <i class="fas fa-arrow-left me-1"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-dark text-white py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>مسار الأمن السيبراني</h5>
                    <p>منصة تعليمية متخصصة في تقديم محتوى أكاديمي وعملي في مجال الأمن السيبراني.</p>
                </div>
                <div class="col-md-3">
                    <h5>روابط سريعة</h5>
                    <ul class="list-unstyled">
                        <li><a href="../index.html" class="text-white">الرئيسية</a></li>
                        <li><a href="#" class="text-white">جميع المقررات</a></li>
                        <li><a href="#" class="text-white">الدعم الفني</a></li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h5>تواصل معنا</h5>
                    <ul class="list-unstyled">
                        <li><i class="fas fa-envelope me-2"></i> info@cyberpath.com</li>
                        <li><i class="fas fa-phone me-2"></i> 0502161465</li>
                    </ul>
                </div>
            </div>
            <hr class="my-4 bg-light">
            <div class="row">
                <div class="col-md-6">
                    <p class="mb-0">&copy; 2025 مسار الأمن السيبراني. جميع الحقوق محفوظة.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <a href="#" class="text-white me-3"><i class="fab fa-twitter fa-lg"></i></a>
                    <a href="#" class="text-white me-3"><i class="fab fa-linkedin fa-lg"></i></a>
                    <a href="#" class="text-white me-3"><i class="fab fa-youtube fa-lg"></i></a>
                    <a href="#" class="text-white"><i class="fab fa-github fa-lg"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('الوحدة 2: مساحة النواة ومساحة المستخدم');
        });
    </script>
</body>
</html>
