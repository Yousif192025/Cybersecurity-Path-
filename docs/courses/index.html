<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="مسار دبلوم الأمن السيبراني التقني - دبلوم معتمد يؤهل لسوق العمل في حماية الأنظمة والبيانات. تعرف على المقررات، الموارد، والاختبارات.">
    <title>الخطة الدراسية لدبلوم الأمن السيبراني | مسارات الأمن السيبراني</title>

    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="icon" href="../assets/images/logos/favicon.ico" type="image/x-icon">
    <link rel="manifest" href="../manifest.json">

    <style>
        /* General Body and Font Styles */
        body {
            font-family: 'Tajawal', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4; /* خلفية افتراضية */
            color: #333;
            direction: rtl; /* اتجاه من اليمين لليسار */
            scroll-behavior: smooth;
        }
        /* Specific font for the content if 'Inter' is desired */
        .content-section {
            font-family: 'Inter', sans-serif;
            background-color: #fff;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        :root {
            --primary-blue: #3498db;
            --accent-blue: #2980b9;
            --dark-gray: #333;
            --white: #fff;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --light-gray: #eee;
            --transition: all 0.3s ease;
            --text-dark: #555;
        }

        /* Navigation Bar Styling */
        .navbar {
            background-color: var(--dark-gray);
            border-bottom: 3px solid var(--primary-blue);
        }

        .navbar-brand {
            color: var(--white) !important;
            font-weight: 700;
            font-size: 1.8rem;
        }

        .navbar-nav .nav-link {
            color: var(--white) !important;
            font-weight: 400;
            margin: 0 10px;
            transition: var(--transition);
            position: relative;
            padding-bottom: 5px;
        }

        .navbar-nav .nav-link:hover {
            color: var(--primary-blue) !important;
        }

        .navbar-nav .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            right: 0;
            background-color: var(--primary-blue);
            transition: width 0.3s ease-out;
        }

        .navbar-nav .nav-link:hover::after {
            width: 100%;
            left: 0;
        }

        /* Active link styling */
        .navbar-nav .nav-link.active {
            color: var(--primary-blue) !important;
            font-weight: 700;
        }

        .navbar-nav .nav-link.active::after {
            width: 100%;
            left: 0;
            background-color: var(--primary-blue);
        }

        /* Dropdown specific styles */
        .dropdown-menu {
            background-color: var(--dark-gray);
            border: none;
            box-shadow: var(--shadow);
            padding: 10px 0;
            right: 0 !important; /* هام لضمان فتح القائمة المنسدلة لليمين في RTL */
            left: auto !important; /* يمنع فتحها لليسار */
        }

        .dropdown-item {
            color: var(--white);
            padding: 10px 20px;
            transition: var(--transition);
            background-color: transparent;
            text-align: right;
        }

        .dropdown-item:hover, .dropdown-item:focus {
            background-color: var(--accent-blue);
            color: var(--white);
        }

        /* Language Toggle */
        #langToggle {
            background-color: var(--primary-blue);
            color: var(--white);
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-right: 15px;
            white-space: nowrap;
        }

        #langToggle:hover {
            background-color: var(--accent-blue);
        }

        /* Footer Styling */
        .main-footer {
            background-color: var(--dark-gray);
            color: var(--white);
            padding: 50px 0 20px;
            text-align: right;
            margin-top: 50px;
        }

        .main-footer h5 {
            color: var(--primary-blue);
            font-weight: 700;
            margin-bottom: 25px;
            font-size: 1.3rem;
        }

        .main-footer ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .main-footer ul li {
            margin-bottom: 10px;
        }

        .main-footer ul li a {
            color: var(--white);
            text-decoration: none;
            transition: var(--transition);
            font-weight: 400;
        }

        .main-footer ul li a:hover {
            color: var(--primary-blue);
        }

        .social-icons a {
            color: var(--white);
            font-size: 24px;
            margin-left: 15px;
            transition: var(--transition);
        }

        .social-icons a:hover {
            color: var(--primary-blue);
        }

        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 20px;
            margin-top: 30px;
            text-align: center;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }

        /* Media Queries for Responsiveness */
        @media (max-width: 991.98px) {
            .navbar-nav .nav-link::after {
                display: none;
            }
            .navbar-toggler {
                border-color: rgba(255, 255, 255, 0.1);
            }
            .navbar-toggler-icon {
                background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3e%3cpath stroke='rgba%28255, 255, 255, 0.8%29' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
            }
            .navbar-collapse {
                text-align: right;
            }
            .navbar-nav .nav-link,
            .dropdown-item {
                padding: 10px 15px;
            }
            #langToggle {
                width: 100%;
                margin-top: 10px;
                margin-right: 0;
            }
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">
    <header>
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <a class="navbar-brand" href="../index.html" data-text="logo">منصة الأمن السيبراني</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="../index.html" data-text="home">الدليل الشامل</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" data-text="technical-specialties">
                                التخصصات الفنية
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <li><a class="dropdown-item" href="../specialties/pentesting.html" data-text="pentesting">اختبار الاختراق</a></li>
                                <li><a class="dropdown-item" href="../specialties/dfir.html" data-text="dfir">التحليل الجنائي الرقمي والاستجابة للحوادث</a></li>
                                <li><a class="dropdown-item" href="../specialties/appsec.html" data-text="appsec">أمن التطبيقات</a></li>
                                <li><a class="dropdown-item" href="../specialties/malware-analysis.html" data-text="malware-analysis">تحليل البرمجيات الخبيثة</a></li>
                                <li><a class="dropdown-item" href="../specialties/administration.html" data-text="administration">إدارة الأنظمة والشبكات</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="diploma.html" data-text="diploma">دبلوم الأمن السيبراني</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="../games/games.html" data-text="training-games">الألعاب التدريبية</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="../phase-one.html" data-text="phase-one">المرحلة الأولى</a>
                        </li>
                    </ul>
                    <button class="btn" id="langToggle">English</button>
                </div>
            </div>
        </nav>
    </header>
    <div class="container mx-auto max-w-4xl p-8 bg-white rounded-xl shadow-lg mt-8 mb-8 content-section">
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-2" data-text="diploma-study-plan-title">الخطة الدراسية التفصيلية</h1>
            <p class="text-lg text-gray-600" data-text="diploma-study-plan-desc">اكتشف جميع المقررات الدراسية لدبلوم الأمن السيبراني، مصنفة حسب الأرباع التدريبية.</p>
        </header>

        <div id="courses-container" class="space-y-6">
            </div>
    </div>
    <footer class="main-footer">
        <div class="container">
            <div class="row">
                <div class="col-md-3 col-sm-6 mb-4">
                    <h5 data-text="platform">المنصة</h5>
                    <ul class="list-unstyled">
                        <li><a href="../about.html" data-text="about-platform">عن المنصة</a></li>
                        <li><a href="../policies.html" data-text="policies">السياسات</a></li>
                        <li><a href="../terms.html" data-text="terms">الشروط والأحكام</a></li>
                        <li><a href="../privacy.html" data-text="privacy">سياسة الخصوصية</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6 mb-4">
                    <h5 data-text="resources">المصادر</h5>
                    <ul class="list-unstyled">
                        <li><a href="../learning-platforms.html" data-text="learning-platforms">منصات تعليمية</a></li>
                        <li><a href="../downloads.html" data-text="downloads">الملفات والموارد</a></li>
                        <li><a href="../blog.html" data-text="blog">المدونة</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6 mb-4">
                    <h5 data-text="support">الدعم</h5>
                    <ul class="list-unstyled">
                        <li><a href="../contact.html" data-text="contact-us">اتصل بنا</a></li>
                        <li><a href="../help-center.html" data-text="support-center">مركز المساعدة</a></li>
                        <li><a href="../faq.html" data-text="faq">الأسئلة الشائعة</a></li>
                    </ul>
                </div>

                <div class="col-md-3 col-sm-6 mb-4">
                    <h5 data-text="connect">تواصل معنا</h5>
                    <div class="social-icons">
                        <a href="https://twitter.com/masaar_cyber" target="_blank" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="https://linkedin.com/company/masaar-cyber" target="_blank" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://youtube.com/channel/your-channel-id" target="_blank" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p data-text="copyright">© 2025 منصة مسار الأمن السيبراني. جميع الحقوق محفوظة.</p>
            </div>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Define coursesData globally so it's accessible within the script
        const coursesData = [
            {
                quarter: 'الربع التدريبي الأول',
                courses: [
                    { name: 'التوجيه المهني', id: 'career_guidance' },
                    { name: 'الكتابة الفنية', id: 'technical_writing_1' },
                    { name: 'مقدمة تطبيقات الحاسب', id: 'intro_computer_apps' },
                    { name: 'الكتابة الفنية (2)', id: 'technical_writing_2' }
                ]
            },
            {
                quarter: 'الربع التدريبي الثاني',
                courses: [
                    { name: 'أساسيات الأمن السيبراني', id: 'cyber_basics' },
                    { name: 'مبادئ شبكات الحاسب', id: 'networking_basics' },
                    { name: 'لغة انجليزية -1', id: 'english_1' }
                ]
            },
            {
                quarter: 'الربع التدريبي الثالث',
                courses: [
                    { name: 'تطبيقات الحاسب المتقدمة', id: 'advanced_computer_apps' },
                    { name: 'نظم التشغيل', id: 'os' },
                    { name: 'لغة انجليزية -2', id: 'english_2' }
                ]
            },
            {
                quarter: 'الربع التدريبي الرابع',
                courses: [
                    { name: 'إدارة أمن المعلومات', id: 'infosec_mgmt' },
                    { name: 'برمجة الحاسب', id: 'programming' },
                    { name: 'الخوارزميات والمنطق', id: 'algorithms' }
                ]
            },
            {
                quarter: 'الربع التدريبي الخامس',
                courses: [
                    { name: 'السلوك الوظيفي', id: 'professional_behavior' },
                    { name: 'أمن أنظمة التشغيل', id: 'os_security' },
                    { name: 'تطوير البرمجيات الآمنة', id: 'secure_software_dev' },
                    { name: 'لغة انجليزية -3', id: 'english_3' }
                ]
            },
            {
                quarter: 'الربع التدريبي السادس',
                courses: [
                    { name: 'مهارات التعلم', id: 'learning_skills' },
                    { name: 'الاختراق الأخلاقي وأساليب الحماية', id: 'ethical_hacking' },
                    { name: 'أمن الشبكات والاتصالات', id: 'network_security' },
                    { name: 'الدراسات الإسلامية', id: 'islamic_studies' }
                ]
            },
            {
                quarter: 'الربع التدريبي السابع',
                courses: [
                    { name: 'التشفير التطبيقي', id: 'applied_cryptography' },
                    { name: 'إنترنت الأشياء الآمنة', id: 'iot_security' },
                    { name: 'إدارة المخاطر والاستجابة للحوادث', id: 'risk_management' }
                ]
            },
            {
                quarter: 'الربع التدريبي الثامن',
                courses: [
                    { name: 'الأخلاق والقانون السيبراني', id: 'cyber_law_ethics' },
                    { name: 'الحوسبة السحابية وأمن المحاكاة الافتراضية', id: 'cloud_security' },
                    { name: 'تقنيات الإنترنت المتقدمة', id: 'advanced_web_tech' },
                    { name: 'مشروع التخرج', id: 'graduation_project' }
                ]
            }
        ];

        // Language Management System - Moved directly into HTML
        const langManager = {
            currentLang: 'ar',
            translations: {
                ar: {
                    // Translations specific to the Diploma Study Plan page (if any)
                    "diploma-study-plan-title": "الخطة الدراسية التفصيلية",
                    "diploma-study-plan-desc": "اكتشف جميع المقررات الدراسية لدبلوم الأمن السيبراني، مصنفة حسب الأرباع التدريبية.",
                    "quarter-1": "الربع التدريبي الأول",
                    "quarter-2": "الربع التدريبي الثاني",
                    "quarter-3": "الربع التدريبي الثالث",
                    "quarter-4": "الربع التدريبي الرابع",
                    "quarter-5": "الربع التدريبي الخامس",
                    "quarter-6": "الربع التدريبي السادس",
                    "quarter-7": "الربع التدريبي السابع",
                    "quarter-8": "الربع التدريبي الثامن",
                    "view-details": "عرض التفاصيل",
                    "career_guidance": "التوجيه المهني",
                    "technical_writing_1": "الكتابة الفنية",
                    "intro_computer_apps": "مقدمة تطبيقات الحاسب",
                    "technical_writing_2": "الكتابة الفنية (2)",
                    "cyber_basics": "أساسيات الأمن السيبراني",
                    "networking_basics": "مبادئ شبكات الحاسب",
                    "english_1": "لغة انجليزية -1",
                    "advanced_computer_apps": "تطبيقات الحاسب المتقدمة",
                    "os": "نظم التشغيل",
                    "english_2": "لغة انجليزية -2",
                    "infosec_mgmt": "إدارة أمن المعلومات",
                    "programming": "برمجة الحاسب",
                    "algorithms": "الخوارزميات والمنطق",
                    "professional_behavior": "السلوك الوظيفي",
                    "os_security": "أمن أنظمة التشغيل",
                    "secure_software_dev": "تطوير البرمجيات الآمنة",
                    "english_3": "لغة انجليزية -3",
                    "learning_skills": "مهارات التعلم",
                    "ethical_hacking": "الاختراق الأخلاقي وأساليب الحماية",
                    "network_security": "أمن الشبكات والاتصالات",
                    "islamic_studies": "الدراسات الإسلامية",
                    "applied_cryptography": "التشفير التطبيقي",
                    "iot_security": "إنترنت الأشياء الآمنة",
                    "risk_management": "إدارة المخاطر والاستجابة للحوادث",
                    "cyber_law_ethics": "الأخلاق والقانون السيبراني",
                    "cloud_security": "الحوسبة السحابية وأمن المحاكاة الافتراضية",
                    "advanced_web_tech": "تقنيات الإنترنت المتقدمة",
                    "graduation_project": "مشروع التخرج",

                    // Common translations for Header/Footer
                    logo: "منصة الأمن السيبراني",
                    home: "الدليل الشامل",
                    "technical-specialties": "التخصصات الفنية",
                    pentesting: "اختبار الاختراق",
                    dfir: "التحليل الجنائي الرقمي والاستجابة للحوادث",
                    appsec: "أمن التطبيقات",
                    "malware-analysis": "تحليل البرمجيات الخبيثة",
                    administration: "إدارة الأنظمة والشبكات",
                    diploma: "دبلوم الأمن السيبراني", 
                    "training-games": "الألعاب التدريبية",
                    "phase-one": "المرحلة الأولى",
                    platform: "المنصة",
                    "about-platform": "عن المنصة",
                    policies: "السياسات",
                    terms: "الشروط والأحكام",
                    privacy: "سياسة الخصوصية",
                    resources: "المصادر",
                    "learning-platforms": "منصات تعليمية",
                    downloads: "الملفات والموارد",
                    blog: "المدونة",
                    support: "الدعم",
                    "contact-us": "اتصل بنا",
                    "support-center": "مركز المساعدة",
                    faq: "الأسئلة الشائعة",
                    connect: "تواصل معنا",
                    twitter: "تويتر",
                    linkedin: "لينكدإن",
                    youtube: "يوتيوب",
                    copyright: "© 2025 منصة مسار الأمن السيبراني. جميع الحقوق محفوظة."
                },
                en: {
                    // Translations specific to the Diploma Study Plan page (if any)
                    "diploma-study-plan-title": "Detailed Study Plan",
                    "diploma-study-plan-desc": "Explore all cybersecurity diploma courses, categorized by training quarters.",
                    "quarter-1": "First Training Quarter",
                    "quarter-2": "Second Training Quarter",
                    "quarter-3": "Third Training Quarter",
                    "quarter-4": "Fourth Training Quarter",
                    "quarter-5": "Fifth Training Quarter",
                    "quarter-6": "Sixth Training Quarter",
                    "quarter-7": "Seventh Training Quarter",
                    "quarter-8": "Eighth Training Quarter",
                    "view-details": "View Details",
                    "career_guidance": "Career Guidance",
                    "technical_writing_1": "Technical Writing (1)",
                    "intro_computer_apps": "Introduction to Computer Applications",
                    "technical_writing_2": "Technical Writing (2)",
                    "cyber_basics": "Cybersecurity Basics",
                    "networking_basics": "Networking Principles",
                    "english_1": "English Language -1",
                    "advanced_computer_apps": "Advanced Computer Applications",
                    "os": "Operating Systems",
                    "english_2": "English Language -2",
                    "infosec_mgmt": "Information Security Management",
                    "programming": "Computer Programming",
                    "algorithms": "Algorithms and Logic",
                    "professional_behavior": "Professional Behavior",
                    "os_security": "Operating System Security",
                    "secure_software_dev": "Secure Software Development",
                    "english_3": "English Language -3",
                    "learning_skills": "Learning Skills",
                    "ethical_hacking": "Ethical Hacking and Protection Methods",
                    "network_security": "Network and Communications Security",
                    "islamic_studies": "Islamic Studies",
                    "applied_cryptography": "Applied Cryptography",
                    "iot_security": "Secure Internet of Things",
                    "risk_management": "Risk Management and Incident Response",
                    "cyber_law_ethics": "Cyber Law and Ethics",
                    "cloud_security": "Cloud Computing and Virtualization Security",
                    "advanced_web_tech": "Advanced Internet Technologies",
                    "graduation_project": "Graduation Project",

                    // Common translations for Header/Footer
                    logo: "Cybersecurity Path",
                    home: "Full Guide",
                    "technical-specialties": "Technical Specialties",
                    pentesting: "Penetration Testing",
                    dfir: "DFIR",
                    appsec: "App Security",
                    "malware-analysis": "Malware Analysis",
                    administration: "Sys & Net Admin",
                    diploma: "Cybersecurity Diploma", 
                    "training-games": "Training Games",
                    "phase-one": "Phase One",
                    platform: "Platform",
                    "about-platform": "About Us",
                    policies: "Policies",
                    terms: "Terms & Conditions",
                    privacy: "Privacy Policy",
                    resources: "Resources",
                    "learning-platforms": "Learning Platforms",
                    downloads: "Downloads & Resources",
                    blog: "Blog",
                    support: "Support",
                    "contact-us": "Contact Us",
                    "support-center": "Help Center",
                    faq: "FAQ",
                    connect: "Connect With Us",
                    twitter: "Twitter",
                    linkedin: "LinkedIn",
                    youtube: "YouTube",
                    copyright: "© 2025 Cybersecurity Path. All rights reserved."
                }
            },
            init() {
                this.loadLanguage();
                this.setupEventListeners();
            },
            loadLanguage() {
                const savedLang = localStorage.getItem('cyberPathLang') || 'ar';
                this.switchLanguage(savedLang);
            },
            switchLanguage(lang) {
                this.currentLang = lang;
                document.documentElement.lang = lang;
                document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
                this.applyTranslations();
                this.updateLangToggle();
                localStorage.setItem('cyberPathLang', lang);

                if (typeof gtag === 'function') {
                    gtag('event', 'language_change', {
                        'event_category': 'engagement',
                        'event_label': lang
                    });
                }
            },
            applyTranslations() {
                document.querySelectorAll('[data-text]').forEach(el => {
                    const key = el.getAttribute('data-text');
                    if (this.translations[this.currentLang][key]) {
                        el.textContent = this.translations[this.currentLang][key];
                    }
                });

                // Re-render courses to apply translations to dynamically generated content
                // Ensure coursesData is accessible.
                if (typeof window.renderCoursesWithTranslation === 'function') {
                    window.renderCoursesWithTranslation();
                } else if (typeof window.renderCourses === 'function') { // Fallback if translated version not defined
                    window.renderCourses();
                }

                // Apply translations to static header/description of the main content section
                const mainHeaderTitle = document.querySelector('h1[data-text="diploma-study-plan-title"]');
                if (mainHeaderTitle) {
                    mainHeaderTitle.textContent = this.translations[this.currentLang]["diploma-study-plan-title"];
                }
                const mainHeaderDesc = document.querySelector('p[data-text="diploma-study-plan-desc"]');
                if (mainHeaderDesc) {
                    mainHeaderDesc.textContent = this.translations[this.currentLang]["diploma-study-plan-desc"];
                }
            },
            updateLangToggle() {
                const toggle = document.getElementById('langToggle');
                if (toggle) {
                    toggle.textContent = this.currentLang === 'ar' ? 'English' : 'العربية';
                }
            },
            setupEventListeners() {
                const toggle = document.getElementById('langToggle');
                if (toggle) {
                    toggle.addEventListener('click', () => {
                        const newLang = this.currentLang === 'ar' ? 'en' : 'ar';
                        this.switchLanguage(newLang);
                    });
                }
                // Close navbar on internal link click for better mobile UX
                document.querySelectorAll('.navbar-nav a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        const navbarCollapse = document.getElementById('navbarNav');
                        // Check if navbar is open before trying to close
                        if (navbarCollapse && navbarCollapse.classList.contains('show')) {
                            const bsCollapse = new bootstrap.Collapse(navbarCollapse, {
                                toggle: false
                            });
                            bsCollapse.hide();
                        }
                    });
                });
            }
        };

        // Helper function to re-render courses with current language
        // This function is now global to be accessible from langManager
        window.renderCoursesWithTranslation = function() {
            const container = document.getElementById('courses-container');
            container.innerHTML = ''; // Clear existing content before re-rendering
            
            // Ensure coursesData is available.
            if (typeof coursesData === 'undefined') {
                console.error("coursesData is not defined. Cannot render courses.");
                return;
            }

            coursesData.forEach(quarterData => {
                const quarterNumberMatch = quarterData.quarter.match(/\d+/);
                const quarterKey = quarterNumberMatch ? `quarter-${quarterNumberMatch[0]}` : quarterData.quarter;
                const translatedQuarterTitle = langManager.translations[langManager.currentLang][quarterKey] || quarterData.quarter;

                const quarterHtml = `
                    <div class="bg-white rounded-xl shadow-lg p-6 mb-8 transition-transform duration-300 hover:scale-[1.02]">
                        <h2 class="text-2xl font-semibold text-sky-700 mb-4">${translatedQuarterTitle}</h2>
                        <ul class="space-y-3">
                            ${quarterData.courses.map(course => `
                                <li class="bg-gray-50 rounded-lg p-4 transition-all duration-200 hover:bg-sky-50 flex justify-between items-center">
                                    <a href="course-template.html?courseId=${course.id}" class="text-sky-600 font-medium hover:text-sky-800 transition-colors duration-200">
                                        ${langManager.translations[langManager.currentLang][course.id] || course.name}
                                    </a>
                                    <a href="course-template.html?courseId=${course.id}" class="text-sm text-sky-500 hover:text-sky-700 font-bold">
                                        ${langManager.translations[langManager.currentLang]["view-details"]}
                                    </a>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                `;
                container.innerHTML += quarterHtml;
            });

            // Apply translations to static header/description of the main content section
            const mainHeaderTitle = document.querySelector('h1[data-text="diploma-study-plan-title"]');
            if (mainHeaderTitle) {
                mainHeaderTitle.textContent = langManager.translations[langManager.currentLang]["diploma-study-plan-title"];
            }
            const mainHeaderDesc = document.querySelector('p[data-text="diploma-study-plan-desc"]');
            if (mainHeaderDesc) {
                mainHeaderDesc.textContent = langManager.translations[langManager.currentLang]["diploma-study-plan-desc"];
            }
        };

        // This ensures the DOM is fully loaded before trying to run JavaScript that manipulates it.
        // It's crucial for Bootstrap's components to initialize correctly.
        document.addEventListener('DOMContentLoaded', () => {
            // Initial render of the content when the DOM is fully loaded.
            // This is called first to show content immediately with default language.
            if (typeof window.renderCourses === 'function') {
                window.renderCourses(); // Render courses using default language
            }

            // Initialize the language manager. It will then apply translations and re-render with translated texts.
            langManager.init();
        });
    </script>
</body>
</html>
